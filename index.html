<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Click, Click, BOOM ðŸ’¥</title>
  <link rel="icon" href="https://fav.farm/ðŸ’£">
  <style>
    table {
      background-color: #450084;
      min-width: 25rem;
      min-height: 25rem;
    }

    td {
      background-color: wheat;
      border: 0.25rem solid #8EE4D7 ;
    }
    .odd td {
      background-color: #333333;
    }
  </style>
</head>
<body>
  <h1 id="boomText"></h1>
  <table>
    <tbody>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
      <tr>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <!-- Click3.wav by EdgardEdition -- https://freesound.org/s/113093/ -- License: Attribution 3.0 -->
  <audio id="click" src="113093__edgardedition__click3.wav"></audio>

  <!-- Boom_C_02 by cabled_mess -- https://freesound.org/s/350975/ -- License: Creative Commons 0 -->
  <audio id="boom" src="350975__cabled_mess__boom_c_02.wav"></audio>
  <script>
    let clickCount = 0;
    const clickSound = document.getElementById('click')
    const boomSound = document.getElementById('boom')
    let lastSound = clickSound;
    let boomShown = false;

    function toggleBoomText() {
      boomShown = !boomShown;
      const h1 = document.getElementById('boomText');
      if (h1) h1.textContent = boomShown ? 'BOOM' : '';
    }

    function updateRowOddClasses(row = null) {
      const rows = row ? [row] : Array.from(document.querySelectorAll('tbody tr'));
      rows.forEach(r => {
        const count = r.querySelectorAll('td').length;
        r.classList.toggle('odd', count % 2 === 1);
      });
    }
    updateRowOddClasses();


    // TODO: 1 - make it such that if any table cell is clicked, the onClick function below is executed

    document.querySelectorAll("td").forEach(td => {
      td.addEventListener("click", onClick);
    });

    function onClick(ev) {
      lastSound.pause();
      lastSound.currentTime = 0;
      clickCount++;

      const td = ev.target.closest('td');
      if (!td) return;
      const row = td.parentElement;

      if (clickCount % 3 == 0) {
      boomSound.play();
      lastSound = boomSound;
      toggleBoomText();
      } else {
      clickSound.play();
      lastSound = clickSound;
      }

      td.remove();
      updateRowOddClasses(row);
    }

  td.remove();
  updateRowOddClasses(row);
    }
  </script>
</body>
</html>